title: 如何从域名获知 IP
date: 2016-01-28 22:33:58
modified: 2016-01-28 22:33:58
author: jxyi
postid: 43
slug: 43
nicename: domain_to_ip
attachments: $ATTACHMENTS
posttype: post
poststatus: publish
tags: tips
category: tips

## 起因

今天在公司遇到了一个问题，情况是这样的：部门有一台用于打包的服务器，在从代码服务器获取代码时提示 hostname 无法解析，但是我们工作用的 PC 机是可以访问域名的。当时是下班时间，IT 和运维都不在，但是有一个紧急的打包任务必须当天完成。

<!--more-->

## 我的分析

我们使用工作的 PC 机可以访问代码服务器网站，并且可以在本地获取代码，说明代码服务器没有问题。打包服务器提示 hostname 解析失败，有可能是打包服务器连接的 DNS 服务器故障。于是我登录到打包服务器，使用命令：

    ping www.baidu.com

发现无法 ping 通，这就肯定了我的猜想————打包服务器的 DNS 故障了。而我没有该 DNS 服务器的管理权限，而 IT 的人都下班了，所以没法解决这个问题。

## 结果

最后我们还是用打包服务器打好了包，而且是在没有修好 DNS 的情况下。解决过程是这样的：

当时我们试着联系 IT ，但是很明显，IT 没办法及时赶到。当时我已经准备放弃了，然后把这个事为什么无法解决给同事解释，说 DNS 挂了，域名解析不了，就获取不到代码，打不了包，如果能拿到 IP 就好了。然后同事就使用 ping 命令连了一下域名，可以 ping 通。然后他就指着屏幕说，试试这个 IP。我看了之后就恍然醒悟，屏幕上的这个 IP 应该就是代码服务器的 IP 了。

后来的结果就是顺利完成打包工作。

## 总结

首先我为自己这么容易就放弃感到羞愧，感觉联系 IT 是一件很麻烦的事，而且别人都下班了，应该也赶不回来。但是如果当时打不出包，就会对收入造成一定影响，而我并没有寻求其他的方法去解决这个问题，避免可能的损失。

其次是我知道 ping 可以测试网络是否通畅，但是我的理解只到了这里，并没有注意返回信息里还包含了测试域名的 IP 信息。今天就以此文提醒自己，注意细节，不要轻易说不可能。程序员是万能的。

下面贴出 ping 的输出信息：

    D:\work>ping www.baidu.com

    正在 Ping www.a.shifen.com [123.125.65.82] 具有 32 字节的数据:
    来自 123.125.65.82 的回复: 字节=32 时间=24ms TTL=55
    来自 123.125.65.82 的回复: 字节=32 时间=28ms TTL=55
    来自 123.125.65.82 的回复: 字节=32 时间=28ms TTL=55
    来自 123.125.65.82 的回复: 字节=32 时间=24ms TTL=55

    123.125.65.82 的 Ping 统计信息:
        数据包: 已发送 = 4，已接收 = 4，丢失 = 0 (0% 丢失)，
    往返行程的估计时间(以毫秒为单位):
        最短 = 24ms，最长 = 28ms，平均 = 26ms
